<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Layout Embed Example</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .device-frame {
            transition: width 0.3s ease;
            border: 8px solid #333;
            border-radius: 20px;
            background: white;
            overflow: hidden;
        }

        .device-mobile {
            width: 375px;
            height: 667px;
            border-width: 12px;
            border-radius: 30px;
        }

        .device-tablet {
            width: 768px;
            height: 1024px;
            border-width: 12px;
            border-radius: 24px;
        }

        .device-desktop {
            width: 100%;
            height: 800px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
    </style>
</head>

<body class="bg-gray-100 p-8 flex flex-col items-center">

    <div class="max-w-4xl w-full mb-8 text-center">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Full Layout Embed</h1>
        <p class="text-gray-600 mb-6">
            This example programmatically injects a complete event layout with <strong>every available section
                type</strong>.
        </p>

        <div class="flex justify-center gap-4">
            <button onclick="setMode('mobile')"
                class="px-4 py-2 bg-white rounded shadow text-sm font-medium hover:bg-gray-50 flex items-center gap-2">
                üì± Mobile
            </button>
            <button onclick="setMode('tablet')"
                class="px-4 py-2 bg-white rounded shadow text-sm font-medium hover:bg-gray-50 flex items-center gap-2">
                üíª Tablet
            </button>
            <button onclick="setMode('desktop')"
                class="px-4 py-2 bg-white rounded shadow text-sm font-medium hover:bg-gray-50 flex items-center gap-2">
                üñ•Ô∏è Desktop
            </button>
        </div>
    </div>

    <!-- The Iframe Container -->
    <iframe id="preview-frame" src="/?view=public" class="device-desktop shadow-xl bg-white"
        title="Event Invitation"></iframe>

    <script>
        const frame = document.getElementById('preview-frame');

        function setMode(mode) {
            frame.className = 'shadow-xl bg-white ' + (
                mode === 'mobile' ? 'device-mobile' :
                    mode === 'tablet' ? 'device-tablet' :
                        'device-desktop'
            );
        }

        // Full Layout Definition
        const fullLayout = {
            id: 'full-layout-' + Date.now(),
            name: 'Complete Showcase',
            eventType: 'wedding',
            language: 'pt-MZ',
            globalStyles: {
                fontFamilyTitle: 'Playfair Display',
                fontFamilyBody: 'Lato',
                primaryColor: '#4a4a4a',
                secondaryColor: '#7a7a7a',
                backgroundColor: '#ffffff'
            },
            sections: [
                {
                    id: 'splash-1',
                    type: 'SplashSection',
                    content: {
                        title: 'Bem-vindos',
                        names: 'Ana & Pedro',
                        date: '2025-12-12',
                        buttonLabel: 'Abrir Convite',
                        lineVariant: 'heart',
                        icon: 'heart',
                        backgroundImage: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&q=80'
                    },
                    styles: {
                        color: '#ffffff'
                    }
                },
                {
                    id: 'hero-1',
                    type: 'HeroSection',
                    content: {
                        title: 'O Nosso Casamento',
                        subtitle: 'Vamos celebrar o amor!',
                        backgroundImage: 'https://images.unsplash.com/photo-1519225421980-715cb0202128?auto=format&fit=crop&q=80',
                        layout: 'centered'
                    },
                    styles: {
                        color: '#ffffff',
                        height: '600px'
                    }
                },
                {
                    id: 'countdown-1',
                    type: 'CountdownSection',
                    content: {
                        title: 'A Contagem Decrescente',
                        targetDate: '2026-12-12T15:00:00'
                    },
                    styles: {
                        backgroundColor: '#f8f9fa'
                    }
                },
                {
                    id: 'agenda-1',
                    type: 'AgendaSection',
                    content: {
                        title: 'Programa do Dia',
                        items: [
                            { time: '15:00', label: 'Cerim√≥nia', location: 'Igreja Matriz', icon: 'church' },
                            { time: '17:00', label: 'Cocktail', location: 'Jardim do Pal√°cio', icon: 'cocktail' },
                            { time: '19:00', label: 'Jantar', location: 'Sal√£o Nobre', icon: 'utensils' },
                            { time: '22:00', label: 'Festa', location: 'Pista de Dan√ßa', icon: 'music' }
                        ]
                    }
                },
                {
                    id: 'separator-1',
                    type: 'SeparatorSection',
                    content: {
                        style: 'flower',
                        color: '#e11d48'
                    }
                },
                {
                    id: 'rsvp-1',
                    type: 'RSVPSection',
                    content: {
                        title: 'Confirme a Presen√ßa',
                        deadline: '01/11/2025',
                        buttonLabel: 'Confirmar Agora'
                    },
                    styles: {
                        backgroundColor: '#fff1f2'
                    }
                },
                {
                    id: 'guestbook-1',
                    type: 'GuestbookSection',
                    content: {
                        title: 'Livro de Visitas',
                        subtitle: 'Deixe uma mensagem para os noivos',
                        messages: [
                            { name: 'Maria Silva', message: 'Muitas felicidades aos dois!', date: '2025-01-10', id: 'msg-1' },
                            { name: 'Jo√£o Santos', message: 'Ansioso pelo grande dia!', date: '2025-01-11', id: 'msg-2' }
                        ]
                    }
                },
                {
                    id: 'custom-1',
                    type: 'CustomSection',
                    content: {
                        elements: [
                            { type: 'heading', content: 'Informa√ß√µes √öteis', style: 'heading' },
                            { type: 'text', content: 'Para quem vem de fora, recomendamos o Hotel Central.', style: 'paragraph' },
                            { type: 'list', items: ['Dress Code: Formal', 'Parking: Gratuito no local', 'Ofertas: A vossa presen√ßa √© o melhor presente'], listType: 'bullet' }
                        ]
                    },
                    styles: {
                        backgroundColor: '#f0fdf4'
                    }
                }
            ]
        };

        // Send layout when frame is ready
        window.addEventListener('message', (event) => {
            const { type } = event.data;
            if (type === 'EDITOR_READY') {
                console.log('Editor ready, sending layout...');
                frame.contentWindow.postMessage({
                    type: 'EDITOR_LOAD_LAYOUT',
                    payload: fullLayout
                }, '*');
            }
        });

        // Fallback: Try sending after a short delay in case EDITOR_READY was missed
        setTimeout(() => {
            frame.contentWindow.postMessage({
                type: 'EDITOR_LOAD_LAYOUT',
                payload: fullLayout
            }, '*');
        }, 1000);

    </script>
</body>

</html>