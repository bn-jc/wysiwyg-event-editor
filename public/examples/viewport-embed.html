<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viewport Embed Example</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
    </style>
</head>

<body>
    <iframe id="preview-frame" src="/?view=public" title="Event Invitation"></iframe>

    <script>
        const frame = document.getElementById('preview-frame');

        // Full Layout Definition with updated configuration
        const fullLayout = {
            id: 'viewport-layout-' + Date.now(),
            name: 'Immersive Showcase',
            eventType: 'wedding',
            language: 'pt-MZ',
            globalStyles: {
                fontFamilyTitle: 'Playfair Display',
                fontFamilyBody: 'Lato',
                primaryColor: '#e11d48',
                secondaryColor: '#9f1239',
                backgroundColor: '#ffffff',
                layoutMode: 'full' // New feature: Full width layout
            },
            sections: [
                {
                    id: 'nav-1',
                    type: 'NavSection',
                    content: {
                        links: [
                            { label: 'Topo', targetId: 'splash-1' },
                            { label: 'Agenda', targetId: 'agenda-1' },
                            { label: 'RSVP', targetId: 'rsvp-1' }
                        ],
                        style: 'floating',
                        alignment: 'center',
                        backgroundColor: 'rgba(255, 255, 255, 0.9)',
                        textColor: '#1f2937'
                    }
                },
                {
                    id: 'splash-1',
                    type: 'SplashSection',
                    content: {
                        title: 'Cerimónia de Sonho',
                        names: 'Sofia & Miguel',
                        date: '2026-06-20',
                        buttonLabel: 'Entrar',
                        lineVariant: 'flourish',
                        icon: 'rings',
                        backgroundImage: 'https://images.unsplash.com/photo-1519741497674-611481863552?w=1920&q=80'
                    },
                    styles: {
                        color: '#ffffff'
                    }
                },
                {
                    id: 'hero-1',
                    type: 'HeroSection',
                    content: {
                        title: 'O Nosso Dia',
                        subtitle: 'Junte-se a nós nesta celebração de amor',
                        backgroundImage: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=1920&q=80',
                        layout: 'centered'
                    },
                    styles: {
                        color: '#ffffff',
                        height: '100vh',
                        backgroundColor: '#1f2937'
                    },
                },
                {
                    id: 'agenda-1',
                    type: 'AgendaSection',
                    content: {
                        title: 'Agenda',
                        items: [
                            { time: '14:00', label: 'Chegada', location: 'Jardins', icon: 'map-pin' },
                            { time: '15:00', label: 'Cerimónia', location: 'Capela', icon: 'heart' },
                            { time: '17:00', label: 'Cocktail', location: 'Terraço', icon: 'cocktail' }
                        ]
                    },
                    styles: {
                        backgroundColor: '#f3f4f6',
                        paddingTop: '100px',
                        paddingBottom: '100px'
                    }
                },
                {
                    id: 'rsvp-1',
                    type: 'RSVPSection',
                    content: {
                        title: 'RSVP',
                        deadline: '2026-05-01',
                        buttonLabel: 'Confirmar Presença'
                    },
                    styles: {
                        backgroundColor: '#fff1f2',
                        paddingTop: '100px',
                        paddingBottom: '100px'
                    }
                }
            ]
        };

        window.addEventListener('message', (event) => {
            const { type } = event.data;
            if (type === 'EDITOR_READY') {
                frame.contentWindow.postMessage({
                    type: 'EDITOR_LOAD_LAYOUT',
                    payload: fullLayout
                }, '*');
            }
        });

        setTimeout(() => {
            frame.contentWindow.postMessage({
                type: 'EDITOR_LOAD_LAYOUT',
                payload: fullLayout
            }, '*');
        }, 1500);

    </script>
</body>

</html>